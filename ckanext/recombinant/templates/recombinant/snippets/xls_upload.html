{% extends 'recombinant/snippets/xls_base.html' %}

{% block title %}{{_('Create and update records from Excel spreadsheet')}}{% endblock %}

{% block form %}
<form enctype="multipart/form-data" id="dataset-form" class="dataset-form dataset-resource-form form-horizontal" method="post" action='{% url_for controller='ckanext.recombinant.controller:UploadController', action='upload', id=pkg.name %}'>
{% endblock %}

{% block upload_submit %}
  <div class="clear"></div>
  <div class="span-1 row-start">
    <label for="xls_update">{{ _('Upload') }}:</label>
  </div>
  <div class="span-4 row-end">
    <input required
      type="file"
      name="xls_update"
      id="xls_update"
      accept="application/vnd.ms-excel">
  </div>
  <div>
  {% if errors %}
    <div class="span-3 form-attention">
      {% for error in errors %}
        {% for k,v in error.iteritems() %}
          <label>{{ _(k).format(*v) }}</label>
        {% endfor %}
      {% endfor %}
    </div>
  {% endif %}
  </div>
  <div class="clear"></div>
  <div class="row">
    <input class="button button-accent button-large" type="submit" value="{{_('Submit')}}"/>
  </div>
{% endblock %}
