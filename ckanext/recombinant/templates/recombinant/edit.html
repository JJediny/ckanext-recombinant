{% extends 'package/base_form_page.html' %}

{% set pkg = c.pkg_dict %}

{% block breadcrumb_content_selected %}{% endblock %}

{% block breadcrumb_content %}
  {{ super() }}
  <li class="active">{% link_for _('Edit'), controller='package', action='edit', id=pkg.name %}</li>
{% endblock %}

{% block primary_content %}
  <header class="module-content page-header"></header>
    <div class="wet-boew-tabbedinterface tabs-style-3 auto-height-none">
      <ul class="tabs">
        <li {% if not delete_errors %}class="default"{% endif %}><a href="#tabs_update">{{ _("Update") }}</a></li>
        {% if pkg.resources and h.check_access('package_update', {'id': pkg.id }) %}
          <li {% if delete_errors %}class="default"{% endif %}><a href="#tabs_delete">{{ _("Delete") }}</a></li>
        {% endif %}
        <li><a href="#tabs_api_curl">{{ _("API Access") }}: curl</a></li>
        <li><a href="#tabs_api_python">{{ _("API Access") }}: Python</a></li>
      </ul>
      <div class="tabs-panel">
        <div id="tabs_update" style="padding: 1px 10px">
          <div class="module-content">
            {% if h.check_access('package_update', {'id': pkg.id }) %}
              {% snippet "recombinant/snippets/xls_upload.html",
                pkg=pkg, errors=errors %}
            {% else %}
              {% snippet "recombinant/snippets/xls_download.html",
                pkg=pkg, errors=errors %}
            {% endif %}
          </div>
        </div>
        {% if pkg.resources %}
          {% if h.check_access('package_update', {'id': pkg.id }) %}
            <div id="tabs_delete" style="padding: 1px 10px">
              {% snippet "recombinant/snippets/delete.html",
                pkg=pkg, errors=delete_errors, filters=filters %}
            </div>
          {% endif %}
          <div id="tabs_api_curl" style="padding: 1px 10px">
            {% snippet "recombinant/snippets/api_access.html",
              pkg=pkg, username=c.userobj.name, examples='curl' %}
          </div>
          <div id="tabs_api_python" style="padding: 1px 10px">
            {% snippet "recombinant/snippets/api_access.html",
              pkg=pkg, username=c.userobj.name, examples='python' %}
          </div>
        {% endif %}
      </div>
    </div>
  </section>
{% endblock %}

{# syntax hilighting for API docs above #}
{% block links %}
{{ super() }}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/docco.min.css">
{% endblock %}
{% block scripts %}
{{ super() }}
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
{% endblock %}

